{"ast":null,"code":"import _regeneratorRuntime from \"/home/irfan91/Desktop/aplikasi-keuangan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/irfan91/Desktop/aplikasi-keuangan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/irfan91/Desktop/aplikasi-keuangan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/irfan91/Desktop/aplikasi-keuangan/src/scenes/private/transaksi/index.js\";\nimport React, { useState, useEffect } from 'react'; // material -ui\n\nimport Typography from \"@material-ui/core/Typography\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport Grid from \"@material-ui/core/Grid\"; //import icons\n\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport ViewIcon from \"@material-ui/icons/Visibility\";\nimport IconButton from \"@material-ui/core/IconButton\"; //firebase hook\n\nimport { useFirebase } from \"../../../components/FirebaseProvider\";\nimport { useCollection } from \"react-firebase-hooks/firestore\"; //import helper\n\nimport { currency } from \"../../../helpers/formatter\"; // import date format\n\nimport format from \"date-fns/format\"; // import loading\n\nimport AppLoading from \"../../../components/AppLoading\"; //import css\n\nimport useStyles from './style'; // import dialog\n\nimport DetailsDialog from \"./details\";\nexport default function Transaksi() {\n  const classes = useStyles();\n\n  const _useFirebase = useFirebase(),\n        firestore = _useFirebase.firestore,\n        user = _useFirebase.user;\n\n  const transaksiCol = firestore.collection(\"toko/\".concat(user.uid, \"/transaksi\"));\n\n  const _useCollection = useCollection(transaksiCol),\n        _useCollection2 = _slicedToArray(_useCollection, 2),\n        snapshot = _useCollection2[0],\n        loading = _useCollection2[1];\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        transaksiItems = _useState2[0],\n        setTransaksiItems = _useState2[1];\n\n  const _useState3 = useState({\n    open: false,\n    transaksi: {}\n  }),\n        _useState4 = _slicedToArray(_useState3, 2),\n        details = _useState4[0],\n        setDetails = _useState4[1];\n\n  useEffect(() => {\n    if (snapshot) {\n      setTransaksiItems(snapshot.docs);\n    }\n  }, [snapshot]);\n\n  const handleDelete = transaksiDoc => /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            if (!window.confirm(\"Apakah anda ingin menghapus transaksi ini ?\")) {\n              _context.next = 3;\n              break;\n            }\n\n            _context.next = 3;\n            return transaksiDoc.ref.delete();\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  const handleCloseDetails = e => {\n    setDetails({\n      open: false,\n      transaksi: {}\n    });\n  };\n\n  const handleOpenDetails = transaksiDoc => e => {\n    setDetails({\n      open: true,\n      transaksi: transaksiDoc.detail()\n    });\n  };\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(AppLoading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 16\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    component: \"h1\",\n    variant: \"h5\",\n    paragraph: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 12\n    }\n  }, \"Daftar Transaksi\"), transaksiItems.length <= 0 && /*#__PURE__*/React.createElement(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }, \"Belum ada transaksi\"), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, transaksiItems.map(transaksiDoc => {\n    const transaksiData = transaksiDoc.data();\n    return /*#__PURE__*/React.createElement(Grid, {\n      key: transaksiDoc.id,\n      item: true,\n      xs: 12,\n      sm: 12,\n      md: 6,\n      lg: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 28\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: classes.card,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(CardContent, {\n      className: classes.transaksiSummary,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h5\",\n      noWrap: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 33\n      }\n    }, transaksiData.no), /*#__PURE__*/React.createElement(Typography, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 33\n      }\n    }, \"Total :  \", currency(transaksiData.total)), /*#__PURE__*/React.createElement(Typography, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 33\n      }\n    }, \"Tanggal :  \", format(new Date(transaksiData.timestamp), 'dd-LL-yyyy HH:mm'))), /*#__PURE__*/React.createElement(CardActions, {\n      className: classes.transaksiActions,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      onClick: handleOpenDetails(transaksiDoc),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 33\n      }\n    }, \" \", /*#__PURE__*/React.createElement(ViewIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 88\n      }\n    })), /*#__PURE__*/React.createElement(IconButton, {\n      onClick: handleDelete(transaksiDoc),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 33\n      }\n    }, \" \", /*#__PURE__*/React.createElement(DeleteIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 83\n      }\n    })))));\n  })), /*#__PURE__*/React.createElement(DetailsDialog, {\n    open: details.open,\n    handleClose: handleCloseDetails,\n    transaksi: details.transaksi,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }));\n}","map":{"version":3,"sources":["/home/irfan91/Desktop/aplikasi-keuangan/src/scenes/private/transaksi/index.js"],"names":["React","useState","useEffect","Typography","Card","CardContent","CardActions","Grid","DeleteIcon","ViewIcon","IconButton","useFirebase","useCollection","currency","format","AppLoading","useStyles","DetailsDialog","Transaksi","classes","firestore","user","transaksiCol","collection","uid","snapshot","loading","transaksiItems","setTransaksiItems","open","transaksi","details","setDetails","docs","handleDelete","transaksiDoc","e","window","confirm","ref","delete","handleCloseDetails","handleOpenDetails","detail","length","map","transaksiData","data","id","card","transaksiSummary","no","total","Date","timestamp","transaksiActions"],"mappings":"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","sourcesContent":["import React, {useState,useEffect} from 'react'\n\n// material -ui\nimport Typography from \"@material-ui/core/Typography\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport Grid from \"@material-ui/core/Grid\";\n\n//import icons\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport ViewIcon from \"@material-ui/icons/Visibility\";\nimport IconButton from \"@material-ui/core/IconButton\";\n\n//firebase hook\nimport { useFirebase } from \"../../../components/FirebaseProvider\";\nimport { useCollection } from \"react-firebase-hooks/firestore\";\n\n//import helper\nimport { currency } from \"../../../helpers/formatter\";\n\n// import date format\nimport format from \"date-fns/format\";\n\n// import loading\nimport AppLoading from \"../../../components/AppLoading\";\n\n//import css\nimport useStyles from './style';\n\n// import dialog\nimport DetailsDialog from \"./details\";\nexport default function Transaksi() {\n\n    const classes = useStyles();\n    const {firestore, user} = useFirebase();\n    const transaksiCol = firestore.collection(`toko/${user.uid}/transaksi`);\n    const [snapshot, loading] = useCollection(transaksiCol);\n    const [transaksiItems, setTransaksiItems] = useState([]);\n    const [details , setDetails] = useState({\n        open : false,\n        transaksi : {}\n    })\n    useEffect(()=>{\n        if(snapshot){\n            setTransaksiItems(snapshot.docs);\n        }\n    },[snapshot])\n\n    const handleDelete = transaksiDoc => async  e => {\n        if( window.confirm(\"Apakah anda ingin menghapus transaksi ini ?\")){\n                await transaksiDoc.ref.delete();\n        }\n    }    \n\n    const handleCloseDetails = (e) => {\n        setDetails({\n            open : false ,\n            transaksi : {}\n        })\n    }\n    \n    const handleOpenDetails = transaksiDoc =>  (e) => {\n        setDetails({\n            open : true,\n            transaksi : transaksiDoc.detail()\n        })\n    }\n    if(loading) {\n        return <AppLoading />\n    }\n\n    return (\n        <div>\n           <Typography component=\"h1\" variant=\"h5\" paragraph>\n            Daftar Transaksi\n           </Typography>\n            {\n                transaksiItems.length <= 0 && \n                <Typography>Belum ada transaksi</Typography>\n            }\n\n            <Grid container spacing={5}>\n            {\n                transaksiItems.map(transaksiDoc=>{\n                    const transaksiData = transaksiDoc.data();\n                   return  <Grid key={transaksiDoc.id} item xs={12} sm={12} md={6} lg={4}> \n                        <Card className={classes.card}>\n                            <CardContent className={classes.transaksiSummary}>\n                                <Typography variant=\"h5\" noWrap>\n                                    {transaksiData.no}\n                                </Typography>\n                                <Typography >\n                                   Total :  { currency(transaksiData.total)}\n                                </Typography>\n                                <Typography >\n                                   Tanggal :  { format(new Date(transaksiData.timestamp),'dd-LL-yyyy HH:mm')}\n                                </Typography>\n                            </CardContent>\n                            <CardActions className={classes.transaksiActions}>\n                                <IconButton onClick={handleOpenDetails(transaksiDoc)}> <ViewIcon /></IconButton>\n                                <IconButton onClick={handleDelete(transaksiDoc)}> <DeleteIcon /></IconButton>\n                                \n                            </CardActions>\n                        </Card>\n                   </Grid>\n                })\n            }\n            </Grid>\n            <DetailsDialog \n                open={details.open}\n                handleClose = {handleCloseDetails}\n                transaksi = {details.transaksi}\n            />\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}