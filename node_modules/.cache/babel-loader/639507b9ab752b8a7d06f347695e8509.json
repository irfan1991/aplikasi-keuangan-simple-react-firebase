{"ast":null,"code":"import _regeneratorRuntime from \"/home/irfan91/Desktop/aplikasi-keuangan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/irfan91/Desktop/aplikasi-keuangan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/irfan91/Desktop/aplikasi-keuangan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/irfan91/Desktop/aplikasi-keuangan/src/scenes/private/pengaturan/pengguna.js\";\nimport React, { useRef, useState } from 'react'; //material -ui \n\nimport TextField from '@material-ui/core/TextField'; //  firebase hook\n\nimport { useFirebase } from \"../../../components/FirebaseProvider\"; //import notifikasi\n\nimport { useSnackbar } from 'notistack'; //import validator\n\nimport isEmail from 'validator/lib/isEmail';\nexport default function Pengguna() {\n  const _useFirebase = useFirebase(),\n        user = _useFirebase.user;\n\n  const _useState = useState({\n    displayName: '',\n    email: ''\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        error = _useState2[0],\n        setError = _useState2[1];\n\n  const displayNameRef = useRef();\n  const emailRef = useRef();\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        isSubmitting = _useState4[0],\n        setSubmitting = _useState4[1];\n\n  const _useSnackbar = useSnackbar(),\n        enqueueSnackbar = _useSnackbar.enqueueSnackbar;\n\n  const saveDisplayName = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var displayName;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            displayName = displayNameRef.current.value;\n            console.log(displayName);\n\n            if (displayName) {\n              _context.next = 6;\n              break;\n            }\n\n            setError({\n              displayName: \"Nama harus diisi !\"\n            });\n            _context.next = 13;\n            break;\n\n          case 6:\n            if (!(displayName !== user.displayName)) {\n              _context.next = 13;\n              break;\n            }\n\n            setError({\n              displayName: ''\n            });\n            setSubmitting(true);\n            _context.next = 11;\n            return user.updateProfile({\n              displayName\n            });\n\n          case 11:\n            setSubmitting(false);\n            enqueueSnackbar('Data pengguna berhasil diupdate', {\n              variant: 'success'\n            });\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n\n    return function saveDisplayName(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  const updateEmail = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var email, emailError;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            email = emailRef.current.value;\n\n            if (email) {\n              _context2.next = 5;\n              break;\n            }\n\n            setError({\n              email: 'Email harus diisi !'\n            });\n            _context2.next = 33;\n            break;\n\n          case 5:\n            if (isEmail(email)) {\n              _context2.next = 9;\n              break;\n            }\n\n            setError({\n              email: 'Email tidak valid'\n            });\n            _context2.next = 33;\n            break;\n\n          case 9:\n            if (!(email !== user.email)) {\n              _context2.next = 33;\n              break;\n            }\n\n            setError({\n              email: ''\n            });\n            setSubmitting(true);\n            _context2.prev = 12;\n            _context2.next = 15;\n            return user.updateEmail(email);\n\n          case 15:\n            enqueueSnackbar(\"Email berhasil diupdate \", {\n              variant: 'success'\n            });\n            _context2.next = 32;\n            break;\n\n          case 18:\n            _context2.prev = 18;\n            _context2.t0 = _context2[\"catch\"](12);\n            emailError = '';\n            _context2.t1 = _context2.t0.code;\n            _context2.next = _context2.t1 === 'auth/email-already-in-use' ? 24 : _context2.t1 === 'auth/invalid-email' ? 26 : _context2.t1 === 'auth/requires-recent-login' ? 28 : 30;\n            break;\n\n          case 24:\n            emailError = \"Email sudah digunakan user lain\";\n            return _context2.abrupt(\"break\", 32);\n\n          case 26:\n            emailError = \"Email tidak valid\";\n            return _context2.abrupt(\"break\", 32);\n\n          case 28:\n            emailError = \"Silahkan logout kemudian login kembali untuk update email\";\n            return _context2.abrupt(\"break\", 32);\n\n          case 30:\n            emailError = _context2.t0.message;\n            return _context2.abrupt(\"break\", 32);\n\n          case 32:\n            setSubmitting(false);\n\n          case 33:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2, null, [[12, 18]]);\n    }));\n\n    return function updateEmail(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    id: \"displayName\",\n    name: \"displayName\",\n    label: \"Nama\",\n    defaultValue: user.displayName,\n    inputProps: {\n      ref: displayNameRef,\n      onBlur: saveDisplayName\n    },\n    disabled: isSubmitting,\n    helperText: error.displayName,\n    error: error.displayName ? true : false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    id: \"email\",\n    name: \"email\",\n    label: \"Email\",\n    defaultValue: user.email,\n    inputProps: {\n      ref: emailRef,\n      onBlur: updateEmail\n    },\n    disabled: isSubmitting,\n    helperText: error.email,\n    error: error.email ? true : false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }));\n}","map":{"version":3,"sources":["/home/irfan91/Desktop/aplikasi-keuangan/src/scenes/private/pengaturan/pengguna.js"],"names":["React","useRef","useState","TextField","useFirebase","useSnackbar","isEmail","Pengguna","user","displayName","email","error","setError","displayNameRef","emailRef","isSubmitting","setSubmitting","enqueueSnackbar","saveDisplayName","e","current","value","console","log","updateProfile","variant","updateEmail","emailError","code","message","ref","onBlur"],"mappings":"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","sourcesContent":["import React,{useRef, useState} from 'react'\n\n//material -ui \nimport TextField from '@material-ui/core/TextField'\n\n//  firebase hook\nimport { useFirebase } from \"../../../components/FirebaseProvider\";\n\n//import notifikasi\nimport {useSnackbar} from 'notistack'\n\n//import validator\nimport isEmail from 'validator/lib/isEmail'\n\nexport default function Pengguna() {\n\n    const { user } = useFirebase();\n    const [error, setError] = useState({\n        displayName : '',\n        email : ''\n\n    });\n\n    const displayNameRef =  useRef();\n    const emailRef =  useRef();\n    const [isSubmitting, setSubmitting] = useState(false);\n    const {enqueueSnackbar} = useSnackbar();\n    const saveDisplayName = async (e)=>{\n        const displayName = displayNameRef.current.value;\n        console.log(displayName)\n\n        if (!displayName) {\n            setError({\n                displayName : \"Nama harus diisi !\"\n            })\n        } else if(displayName !== user.displayName){\n\n            setError({\n                displayName : ''\n            })\n\n            setSubmitting(true);\n            await user.updateProfile({\n                displayName\n            });\n            setSubmitting(false);\n            enqueueSnackbar('Data pengguna berhasil diupdate', {variant : 'success'});\n        }\n\n       \n    }\n\n    const updateEmail = async (e)=>{\n        const email = emailRef.current.value;\n\n        if (!email) {\n            setError({\n                email : 'Email harus diisi !'\n            })\n        } else if(!isEmail(email)) {\n\n            setError({\n                email : 'Email tidak valid'\n            })\n        } else if(email !== user.email){\n\n\n            setError({\n                email : ''\n            })\n\n            setSubmitting(true);\n           \n            try {\n\n                await user.updateEmail(email);\n                enqueueSnackbar(\"Email berhasil diupdate \", {variant:'success'});\n\n            } catch(e){\n               \n                let emailError = '';\n\n                switch (e.code) {\n                    case 'auth/email-already-in-use':\n                        emailError=\"Email sudah digunakan user lain\";\n                        break;\n\n                    case 'auth/invalid-email':\n                        emailError=\"Email tidak valid\";\n                        break;\n\n                     case 'auth/requires-recent-login':\n                        emailError=\"Silahkan logout kemudian login kembali untuk update email\";\n                        break;\n                \n                    default:\n                        emailError= e.message;\n                        break;\n                }\n\n            }\n\n            setSubmitting(false);\n        }\n    }\n\n    return (\n        <div>\n            <TextField \n                id=\"displayName\"\n                name=\"displayName\"\n                label=\"Nama\"\n                defaultValue={user.displayName}\n                inputProps={{\n                    ref : displayNameRef,\n                    onBlur: saveDisplayName,\n                }}\n                disabled={isSubmitting}\n                helperText={error.displayName}\n                error={error.displayName ? true : false}\n            />\n\n            <TextField \n                id=\"email\"\n                name =\"email\"\n                label = \"Email\"\n                defaultValue={user.email}\n                inputProps={{\n                    ref : emailRef,\n                    onBlur: updateEmail,\n                }}\n                disabled={isSubmitting}\n                helperText={error.email}\n                error={error.email ? true : false}\n\n            />\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}