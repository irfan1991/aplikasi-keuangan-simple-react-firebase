{"ast":null,"code":"import _regeneratorRuntime from \"/home/irfan91/Desktop/aplikasi-keuangan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/irfan91/Desktop/aplikasi-keuangan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/home/irfan91/Desktop/aplikasi-keuangan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/irfan91/Desktop/aplikasi-keuangan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/irfan91/Desktop/aplikasi-keuangan/src/scenes/private/pengaturan/toko.js\";\nimport React, { useState } from 'react'; //import material ui\n\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\"; //import style\n\nimport useStyles from \"./style/toko\"; //import validator\n\nimport isURL from \"validator/lib/isURL\"; //import firebase hook\n\nimport { useFirebase } from \"../../../components/FirebaseProvider\";\nexport default function Toko() {\n  const _useState = useState({\n    nama: '',\n    alamat: '',\n    telepon: '',\n    website: ''\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        form = _useState2[0],\n        setForm = _useState2[1];\n\n  const _useState3 = useState({\n    nama: '',\n    alamat: '',\n    telepon: '',\n    website: ''\n  }),\n        _useState4 = _slicedToArray(_useState3, 2),\n        error = _useState4[0],\n        setError = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        isSubmitting = _useState6[0],\n        setSubmiting = _useState6[1];\n\n  const classes = useStyles();\n\n  const _useFirebase = useFirebase(),\n        firestore = _useFirebase.firestore,\n        user = _useFirebase.user;\n\n  const tokoDoc = firestore.doc(\"toko/\".concat(user.uid));\n\n  const handleChange = e => {\n    setForm(_objectSpread(_objectSpread({}, form), {}, {\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  const validate = () => {\n    const newError = _objectSpread({}, error);\n\n    if (!form.nama) {\n      newError.nama = \"Nama wajib diisi\";\n    }\n\n    if (!form.alamat) {\n      newError.alamat = \"Alamat wajib diisi\";\n    }\n\n    if (!form.telepon) {\n      newError.telepon = \"Telepon wajib diisi\";\n    }\n\n    if (!form.website) {\n      newError.website = \"Website wajib diisi\";\n    } else if (!isURL(form.website)) {\n      newError.website = \"Website tidak valid\";\n    }\n\n    return newError;\n  };\n\n  const handleSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var findErrors;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            e.preventDefault();\n            findErrors = validate();\n\n            if (!Object.values(findErrors).some(err => err !== '')) {\n              _context.next = 6;\n              break;\n            }\n\n            setError(findErrors);\n            _context.next = 16;\n            break;\n\n          case 6:\n            setSubmiting(true);\n            _context.prev = 7;\n            _context.next = 10;\n            return tokoDoc.set(form, {\n              marge: true\n            });\n\n          case 10:\n            _context.next = 15;\n            break;\n\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](7);\n            console.log(_context.t0.message);\n\n          case 15:\n            setSubmiting(false);\n\n          case 16:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[7, 12]]);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.pengaturanToko,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    noValidate: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    id: \"nama\",\n    name: \"nama\",\n    label: \"Nama Toko\",\n    margin: \"normal\",\n    fullWidth: true,\n    required: true,\n    value: form.nama,\n    onChange: handleChange,\n    error: error.nama ? true : false,\n    helperText: error.nama,\n    disabled: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    id: \"alamat\",\n    name: \"alamat\",\n    label: \"Alamat Toko\",\n    margin: \"normal\",\n    multiline: true,\n    rowsMax: 3,\n    fullWidth: true,\n    required: true,\n    value: form.alamat,\n    onChange: handleChange,\n    error: error.alamat ? true : false,\n    helperText: error.alamat,\n    disabled: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    id: \"telepon\",\n    name: \"telepon\",\n    label: \"No Telepon Toko\",\n    margin: \"normal\",\n    fullWidth: true,\n    required: true,\n    value: form.telepon,\n    onChange: handleChange,\n    error: error.telepon ? true : false,\n    helperText: error.telepon,\n    disabled: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 18\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    id: \"website\",\n    name: \"website\",\n    label: \"Website Toko\",\n    margin: \"normal\",\n    fullWidth: true,\n    required: true,\n    value: form.website,\n    onChange: handleChange,\n    error: error.website ? true : false,\n    helperText: error.website,\n    disabled: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    className: classes.actionButton,\n    variant: \"contained\",\n    color: \"primary\",\n    disabled: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }, \"Simpan\")));\n}","map":{"version":3,"sources":["/home/irfan91/Desktop/aplikasi-keuangan/src/scenes/private/pengaturan/toko.js"],"names":["React","useState","TextField","Button","useStyles","isURL","useFirebase","Toko","nama","alamat","telepon","website","form","setForm","error","setError","isSubmitting","setSubmiting","classes","firestore","user","tokoDoc","doc","uid","handleChange","e","target","name","value","validate","newError","handleSubmit","preventDefault","findErrors","Object","values","some","err","set","marge","console","log","message","pengaturanToko","actionButton"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\n\n//import material ui\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\n\n//import style\nimport useStyles from \"./style/toko\";\n\n//import validator\nimport isURL from \"validator/lib/isURL\";\n\n//import firebase hook\nimport { useFirebase } from \"../../../components/FirebaseProvider\";\n\nexport default function Toko() {\n\n    const [form, setForm] = useState({\n        nama : '',\n        alamat :'',\n        telepon :'',\n        website : ''\n    });\n\n    const [error, setError] = useState({\n        nama :'',\n        alamat :'',\n        telepon :'',\n        website : ''\n    })\n\n    const [isSubmitting, setSubmiting] = useState(false);\n\n    const classes = useStyles();\n\n    const {firestore, user}  = useFirebase();\n\n    const tokoDoc = firestore.doc(`toko/${user.uid}`);\n\n\n    const handleChange = (e) =>{\n        setForm({\n            ...form,\n            [e.target.name]:e.target.value\n        })\n    };\n\n    const validate = () => {\n        const newError = {...error};\n\n        if (!form.nama) {\n            newError.nama = \"Nama wajib diisi\";\n        }\n\n        if (!form.alamat) {\n            newError.alamat = \"Alamat wajib diisi\";\n        }\n\n        if (!form.telepon) {\n            newError.telepon = \"Telepon wajib diisi\";\n        }\n\n        if (!form.website) {\n            newError.website = \"Website wajib diisi\";\n        } else if (!isURL(form.website)) {\n            newError.website = \"Website tidak valid\";\n        }\n\n\n        return newError;\n    }\n\n    const handleSubmit = async  (e) => {\n        e.preventDefault();\n        const findErrors = validate();\n\n        if (Object.values(findErrors).some(err => err !== '')) {\n            setError(findErrors);\n        } else {\n\n            setSubmiting(true);\n            try{\n                await tokoDoc.set(form,{marge:true});\n\n            } catch(e){\n                console.log(e.message);\n            }\n            setSubmiting(false);\n          \n        }\n    }\n\n\n\n    return (\n        <div className={classes.pengaturanToko}>\n            <form onSubmit={handleSubmit} noValidate>\n                <TextField \n                    id=\"nama\"\n                    name=\"nama\"\n                    label=\"Nama Toko\"\n                    margin=\"normal\"\n                    fullWidth\n                    required\n                    value={form.nama}\n                    onChange ={handleChange}\n                    error={error.nama?true:false}\n                    helperText={error.nama}\n                    disabled={isSubmitting}\n                />\n\n                <TextField \n                    id=\"alamat\"\n                    name=\"alamat\"\n                    label=\"Alamat Toko\"\n                    margin=\"normal\"\n                    multiline\n                    rowsMax={3}\n                    fullWidth\n                    required\n                    value={form.alamat}\n                    onChange ={handleChange}\n                    error={error.alamat?true:false}\n                    helperText={error.alamat}\n                    disabled={isSubmitting}\n                />        \n\n                 <TextField \n                    id=\"telepon\"\n                    name=\"telepon\"\n                    label=\"No Telepon Toko\"\n                    margin=\"normal\"\n                    fullWidth\n                    required\n                    value={form.telepon}\n                    onChange ={handleChange}\n                    error={error.telepon?true:false}\n                    helperText={error.telepon}\n                    disabled={isSubmitting}\n                />   \n\n                <TextField \n                    id=\"website\"\n                    name=\"website\"\n                    label=\"Website Toko\"\n                    margin=\"normal\"\n                    fullWidth\n                    required\n                    value={form.website}\n                    onChange ={handleChange}\n                    error={error.website?true:false}\n                    helperText={error.website}\n                    disabled={isSubmitting}\n                />         \n\n                <Button\n                 type=\"submit\"\n                 className={classes.actionButton}\n                 variant=\"contained\"\n                 color =\"primary\"\n                 disabled={isSubmitting}\n                >\n                    Simpan\n                </Button>\n          </form>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}